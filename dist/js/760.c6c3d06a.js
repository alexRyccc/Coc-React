(self.webpackChunkfzz_react_app=self.webpackChunkfzz_react_app||[]).push([[760],{1798:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(6540),r=n(1225);n(7721);const i=function(){var e=(0,r.wA)(),t=function(e){sessionStorage.setItem("historyPageRefreshed","false"),window.location.href="/#".concat(e)};return a.createElement("div",{className:"sidebar"},a.createElement("ul",null,a.createElement("li",{onClick:function(){return t("/home")},className:"sidebar-button"},"我的人物"),a.createElement("li",{onClick:function(){return t("/history")},className:"sidebar-button"},"跑团历史"),a.createElement("li",{onClick:function(){return t("/newPerson")},className:"sidebar-button"},"新增角色"),a.createElement("li",{onClick:function(){return t("/study")},className:"sidebar-button"},"人物学习"),a.createElement("li",{onClick:function(){return t("/achievements")},className:"sidebar-button"},"成就一栏"),a.createElement("li",{onClick:function(){e({type:"LOGOUT"}),window.location.href="/#/login"},className:"sidebar-button logout-button",style:{marginTop:"auto",backgroundColor:"#ff4757",color:"white"}},"退出登录")))}},6760:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(4467),r=n(296),i=n(6540),o=n(1225),l=n(1798),c=(n(7564),n(937));const s=function(e){var t=e.history,n=(0,i.useState)(null),a=(0,r.A)(n,2),o=a[0],l=a[1];return i.createElement("div",{className:"vertical-timeline-animated-container"},i.createElement("svg",{className:"vertical-timeline-animated-curve",width:60,height:100*t.length+60,style:{position:"absolute",left:30,top:0,zIndex:0}},i.createElement("path",{d:t.length>0?"M30,30 ".concat(t.map(function(e,t){return"Q60,".concat(100*t+60," 30,").concat(100*(t+1)+30)}).join(" ")):"",stroke:"#1890ff",strokeWidth:"5",fill:"none",style:{strokeDasharray:2e3,strokeDashoffset:0,animation:"timeline-flow 2.5s cubic-bezier(.77,0,.18,1) forwards"}})),i.createElement("div",{className:"vertical-timeline-animated-events",style:{position:"relative",zIndex:2}},t.map(function(e,t){return i.createElement("div",{key:t,className:"vertical-timeline-animated-event".concat(o===t?" expanded":""),style:{position:"relative",left:0,marginBottom:40,background:"linear-gradient(120deg,#e6f7ff 0%,#fff 100%)",borderRadius:18,boxShadow:"0 4px 24px #1890ff22",padding:"18px 22px",minWidth:220,maxWidth:340,cursor:"pointer",transition:"box-shadow 0.3s, transform 0.3s",animation:"event-fade-in 0.7s ".concat(.2*t,"s both"),transform:o===t?"scale(1.04)":"scale(1)"},onClick:function(){return l(o===t?null:t)}},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.createElement("div",null,i.createElement("span",{style:{fontWeight:700,color:"#1890ff",fontSize:17}},e.time),i.createElement("span",{style:{fontSize:16,color:"#333",marginLeft:12}},e.event)),i.createElement("span",null,o===t?i.createElement(c.Ucs,null):i.createElement(c.Vr3,null))),i.createElement("div",{className:"timeline-dot-animated",style:{left:-38,top:18,position:"absolute",width:22,height:22,background:"linear-gradient(135deg,#1890ff 0%,#40a9ff 100%)",borderRadius:"50%",boxShadow:"0 2px 12px #1890ff44",border:"3px solid #fff",animation:"dot-bounce 1.2s infinite alternate"}}),o===t&&i.createElement("div",{className:"vertical-timeline-animated-details",style:{marginTop:12,fontSize:15,color:"#444",background:"#f6fbff",borderRadius:10,padding:"10px 12px",boxShadow:"0 2px 8px #1890ff22",animation:"details-expand 0.5s cubic-bezier(.77,0,.18,1) both"}},Object.entries(e).map(function(e){var t=(0,r.A)(e,2),n=t[0],a=t[1];return"time"!==n&&"event"!==n&&a?i.createElement("div",{key:n,style:{marginBottom:7}},i.createElement("strong",{style:{color:"#1890ff"}},n,":")," ",a):null})))})))};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const m=function(){var e=(0,i.useState)(null),t=(0,r.A)(e,2),n=t[0],a=t[1],c=(0,i.useState)(""),f=(0,r.A)(c,2),m=f[0],u=f[1],p=(0,i.useState)([]),g=(0,r.A)(p,2),b=g[0],h=g[1],y=(0,o.d4)(function(e){return e.characters||[]}),x=(0,o.d4)(function(e){return e.user}),v=(0,o.wA)();console.log("History - User state:",x),console.log("History - Raw characters:",y);var E=(0,i.useMemo)(function(){function e(e){var t,n={};return e.skills&&Object.entries(e.skills).forEach(function(e){var t=(0,r.A)(e,2),a=t[0],i=t[1];"number"==typeof i&&(n[a]={initial:i,current:i})}),d(d({},e),{},{skills:n,int:null!==(t=e.int_)&&void 0!==t?t:e.int})}return Array.isArray(y)?y.map(e):y?[e(y)]:[]},[y]);return(0,i.useEffect)(function(){x?(console.log("History - User logged in, fetching characters"),v({type:"FETCH_CHARACTERS"})):console.log("History - User not logged in")},[v,x]),(0,i.useEffect)(function(){},[]),(0,i.useEffect)(function(){var e=E.filter(function(e){return e.name&&e.name.toLowerCase().includes(m.toLowerCase())});h(e)},[m,E]),i.createElement("div",{className:"history-container"},i.createElement(l.A,null),i.createElement("div",{className:"main-content",style:{maxWidth:1200,margin:"0 auto",padding:"32px 8px",boxSizing:"border-box"}},i.createElement("div",{className:"search-bar",style:{display:"flex",justifyContent:"center",marginBottom:24}},i.createElement("input",{type:"text",placeholder:"搜索角色...",value:m,onChange:function(e){return u(e.target.value)},style:{width:"100%",maxWidth:400,padding:"12px 18px",fontSize:17,borderRadius:12,border:"1.5px solid #1890ff",boxShadow:"0 2px 12px #1890ff22",outline:"none",transition:"border 0.2s"}})),i.createElement("div",{className:"content-columns",style:{display:"flex",flexWrap:"wrap",gap:24,justifyContent:"center",alignItems:"flex-start"}},i.createElement("div",{className:"character-selection",style:{minWidth:180,flex:"0 0 220px",background:"rgba(255,255,255,0.85)",borderRadius:18,boxShadow:"0 2px 16px #1890ff11",padding:12,marginBottom:24}},i.createElement("h3",{style:{fontSize:18,fontWeight:600,color:"#1890ff",marginBottom:12,textAlign:"center"}},"角色列表"),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:10}},b.map(function(e,t){return i.createElement("div",{key:t,className:"character-card ".concat((null==n?void 0:n.name)===e.name?"selected":""),onClick:function(){return function(e){a(e)}(e)},style:{padding:"10px 12px",borderRadius:10,background:(null==n?void 0:n.name)===e.name?"linear-gradient(90deg,#1890ff 0%,#40a9ff 100%)":"rgba(255,255,255,0.1)",color:(null==n?void 0:n.name)===e.name?"#fff":"#333",fontWeight:500,fontSize:16,boxShadow:(null==n?void 0:n.name)===e.name?"0 2px 12px #1890ff44":"none",cursor:"pointer",border:(null==n?void 0:n.name)===e.name?"2px solid #1890ff":"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:10}},e.avatar&&i.createElement("img",{src:e.avatar,alt:e.name,style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",marginRight:6,border:"2px solid #e6f7ff"}}),i.createElement("h3",{style:{margin:0}},e.name))}))),n&&i.createElement("div",{className:"selected-character",style:{flex:"1 1 400px",background:"rgba(255,255,255,0.92)",borderRadius:18,boxShadow:"0 2px 16px #1890ff11",padding:16,minWidth:260,overflowX:"auto"}},i.createElement("h2",{style:{fontSize:22,fontWeight:700,color:"#1890ff",marginBottom:12,textAlign:"center"}},n.name," 的时间轴"),i.createElement("div",{className:"timeline-container",style:{width:"100%",minHeight:400,position:"relative",paddingBottom:8}},i.createElement(s,{history:n.history||[]}))))))}},7564:()=>{},7721:()=>{}}]);
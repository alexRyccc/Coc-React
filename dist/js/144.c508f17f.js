(self.webpackChunkfzz_react_app=self.webpackChunkfzz_react_app||[]).push([[144],{1798:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(6540),r=n(1225);n(7721);const i=function(){var e=(0,r.wA)(),t=function(e){sessionStorage.setItem("historyPageRefreshed","false"),window.location.href="/#".concat(e)};return a.createElement("div",{className:"sidebar"},a.createElement("ul",null,a.createElement("li",{onClick:function(){return t("/home")},className:"sidebar-button"},"我的人物"),a.createElement("li",{onClick:function(){return t("/history")},className:"sidebar-button"},"跑团历史"),a.createElement("li",{onClick:function(){return t("/newPerson")},className:"sidebar-button"},"新增角色"),a.createElement("li",{onClick:function(){return t("/study")},className:"sidebar-button"},"人物学习"),a.createElement("li",{onClick:function(){return t("/achievements")},className:"sidebar-button"},"成就一栏"),a.createElement("li",{onClick:function(){e({type:"LOGOUT"}),window.location.href="/#/login"},className:"sidebar-button logout-button",style:{marginTop:"auto",backgroundColor:"#ff4757",color:"white"}},"退出登录")))}},3906:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a={creditRating:"信用评级",accounting:"会计",anthropology:"人类学",appraisal:"估价",archaeology:"考古学",climb:"攀爬",disguise:"乔装",dodge:"闪避",driveAuto:"汽车驾驶",electricalRepair:"电气维修",firstAid:"急救",history:"历史",jump:"跳跃",nativeLanguage:"母语(英文)",law:"法律",libraryUse:"图书馆使用",listen:"聆听",locksmith:"锁匠",mechanicalRepair:"机械维修",medicine:"医学",naturalWorld:"博物学",navigate:"导航",occult:"神秘学",operateHeavyMachinery:"操作重型机械",psychoanalysis:"精神分析",psychology:"心理学",ride:"骑术",sleightOfHand:"妙手",spotHidden:"侦查",stealth:"潜行",swim:"游泳",throw:"投掷",track:"追踪",charm:"魅惑",intimidate:"恐吓",fastTalk:"话术",persuade:"说服",artCraft1:"技艺:表演",artCraft2:"技艺:美术",artCraft3:"技艺:摄影",artCraft4:"技艺:伪造文书",artCraft5:"技艺:写作",artCraft6:"技艺:书法",artCraft7:"技艺:音乐",artCraft8:"技艺:厨艺",artCraft9:"技艺:理发",artCraft10:"技艺:木匠",artCraft11:"技艺:舞蹈",artCraft12:"技艺:莫里斯舞蹈",artCraft13:"技艺:歌剧演唱",artCraft14:"技艺:粉刷/油漆工",artCraft15:"技艺:制陶",artCraft16:"技艺:雕塑",artCraft17:"技艺:耕作",artCraft18:"技艺:制图",artCraft19:"技艺:打字",artCraft20:"技艺:速记",science1:"科学:地质学",science2:"科学:化学",science3:"科学:生物学",science4:"科学:数学",science5:"科学:天文学",science6:"科学:物理学",science7:"科学:药学",science8:"科学:植物学",science9:"科学:动物学",science10:"科学:密码学",science11:"科学:工程学",science12:"科学:气象学",science13:"科学:司法科学",science14:"科学:鉴证",cthulhuMythos:"克苏鲁神话",survival:"生存",fighting1:"格斗:斗殴",fighting2:"格斗:鞭子",fighting3:"格斗:电锯",fighting4:"格斗:斧",fighting5:"格斗:剑",fighting6:"格斗:绞索",fighting7:"格斗:链枷",fighting8:"格斗:矛",firearms1:"射击:步枪/霰弹枪",firearms2:"射击:冲锋枪",firearms3:"射击:弓",firearms4:"射击:火焰喷射器",firearms5:"射击:机枪",firearms6:"射击:手枪",firearms7:"射击:重武器",language1:"中文",language2:"日语",language3:"韩语",language4:"俄语",language5:"西班牙语",language6:"法语",language7:"德语",language8:"意大利语",language9:"葡萄牙语",language10:"阿拉伯语",language11:"拉丁语",demolitions:"爆破",hypnosis:"催眠",lipReading:"读唇",artillery:"炮术",diving:"潜水",animalHandling:"驯兽",custom1:"自定义技能1",custom2:"自定义技能2",custom3:"自定义技能3",custom4:"自定义技能4",custom5:"自定义技能5"}},5144:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(4467),r=n(5458),i=n(296),l=n(6540),c=n(1225),s=(n(7468),n(3906));const u={creditRating:{initial:9,current:9},accounting:{initial:1,current:1},anthropology:{initial:1,current:1},appraisal:{initial:5,current:5},archaeology:{initial:1,current:1},climb:{initial:20,current:20},disguise:{initial:5,current:5},dodge:{initial:0,current:0},driveAuto:{initial:20,current:20},electricalRepair:{initial:10,current:10},firstAid:{initial:30,current:30},history:{initial:20,current:20},jump:{initial:20,current:20},nativeLanguage:{initial:20,current:20},law:{initial:5,current:5},libraryUse:{initial:20,current:20},listen:{initial:20,current:20},locksmith:{initial:1,current:1},mechanicalRepair:{initial:10,current:10},medicine:{initial:1,current:1},naturalWorld:{initial:10,current:10},navigate:{initial:10,current:10},occult:{initial:5,current:5},operateHeavyMachinery:{initial:1,current:1},psychoanalysis:{initial:1,current:1},psychology:{initial:1,current:1},ride:{initial:5,current:5},sleightOfHand:{initial:10,current:10},spotHidden:{initial:25,current:25},stealth:{initial:20,current:20},swim:{initial:20,current:20},throw:{initial:20,current:20},track:{initial:10,current:10},charm:{initial:10,current:10},intimidate:{initial:15,current:15},fastTalk:{initial:5,current:5},persuade:{initial:20,current:20},artCraft1:{initial:15,current:15},artCraft2:{initial:5,current:5},artCraft3:{initial:5,current:5},artCraft4:{initial:5,current:5},artCraft5:{initial:5,current:5},artCraft6:{initial:5,current:5},artCraft7:{initial:5,current:5},artCraft8:{initial:5,current:5},artCraft9:{initial:5,current:5},artCraft10:{initial:5,current:5},artCraft11:{initial:5,current:5},artCraft12:{initial:5,current:5},artCraft13:{initial:5,current:5},artCraft14:{initial:5,current:5},artCraft15:{initial:5,current:5},artCraft16:{initial:5,current:5},artCraft17:{initial:5,current:5},artCraft18:{initial:5,current:5},artCraft19:{initial:5,current:5},artCraft20:{initial:5,current:5},science1:{initial:1,current:1},science2:{initial:1,current:1},science3:{initial:1,current:1},science4:{initial:10,current:10},science5:{initial:1,current:1},science6:{initial:1,current:1},science7:{initial:1,current:1},science8:{initial:1,current:1},science9:{initial:1,current:1},science10:{initial:1,current:1},science11:{initial:1,current:1},science12:{initial:1,current:1},science13:{initial:1,current:1},science14:{initial:1,current:1},cthulhuMythos:{initial:0,current:0},survival:{initial:10,current:10},fighting1:{initial:25,current:25},fighting2:{initial:5,current:5},fighting3:{initial:10,current:10},fighting4:{initial:15,current:15},fighting5:{initial:20,current:20},fighting6:{initial:15,current:15},fighting7:{initial:10,current:10},fighting8:{initial:20,current:20},firearms1:{initial:25,current:25},firearms2:{initial:15,current:15},firearms3:{initial:15,current:15},firearms4:{initial:10,current:10},firearms5:{initial:10,current:10},firearms6:{initial:20,current:20},firearms7:{initial:10,current:10},language1:{initial:1,current:1},language2:{initial:1,current:1},language3:{initial:1,current:1},language4:{initial:1,current:1},language5:{initial:1,current:1},language6:{initial:1,current:1},language7:{initial:1,current:1},language8:{initial:1,current:1},language9:{initial:1,current:1},language10:{initial:1,current:1},language11:{initial:1,current:1},language12:{initial:1,current:1},demolitions:{initial:1,current:1},hypnosis:{initial:1,current:1},lipReading:{initial:1,current:1},artillery:{initial:1,current:1},diving:{initial:1,current:1},animalHandling:{initial:5,current:5}};var o=n(1798);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const p=function(){var e=(0,c.wA)(),t=(0,c.d4)(function(e){return e}),n=(t.isCreatingCharacter,t.createCharacterError),m=t.user,p=(0,l.useState)(""),f=(0,i.A)(p,2),E=f[0],g=f[1],b=(0,l.useState)(""),v=(0,i.A)(b,2),h=v[0],y=v[1],N=(0,l.useState)(""),k=(0,i.A)(N,2),C=k[0],A=k[1],S=(0,l.useState)(""),w=(0,i.A)(S,2),x=w[0],O=w[1],I=(0,l.useState)(""),M=(0,i.A)(I,2),R=M[0],j=M[1],P=(0,l.useState)(""),D=(0,i.A)(P,2),q=D[0],z=D[1],T=(0,l.useState)(""),H=(0,i.A)(T,2),L=H[0],_=H[1],B=(0,l.useState)(""),K=(0,i.A)(B,2),U=K[0],W=K[1],G=(0,l.useState)(""),Q=(0,i.A)(G,2),F=Q[0],J=Q[1],V=(0,l.useState)(""),X=(0,i.A)(V,2),Y=X[0],Z=X[1],$=(0,l.useState)(""),ee=(0,i.A)($,2),te=ee[0],ne=ee[1],ae=(0,l.useState)(""),re=(0,i.A)(ae,2),ie=re[0],le=re[1],ce=(0,l.useState)(""),se=(0,i.A)(ce,2),ue=se[0],oe=se[1],me=(0,l.useState)(""),de=(0,i.A)(me,2),pe=de[0],fe=de[1],Ee=(0,l.useState)(""),ge=(0,i.A)(Ee,2),be=ge[0],ve=ge[1],he=(0,l.useState)(""),ye=(0,i.A)(he,2),Ne=ye[0],ke=ye[1],Ce=(0,l.useState)(""),Ae=(0,i.A)(Ce,2),Se=Ae[0],we=Ae[1],xe=(0,l.useState)(""),Oe=(0,i.A)(xe,2),Ie=Oe[0],Me=Oe[1],Re=(0,l.useState)({}),je=(0,i.A)(Re,2),Pe=je[0],De=je[1],qe=(0,l.useState)({professional:0,interest:0}),ze=(0,i.A)(qe,2),Te=ze[0],He=ze[1],Le=(0,l.useState)({}),_e=(0,i.A)(Le,2),Be=_e[0],Ke=_e[1],Ue=(0,l.useState)({personalDescription:"",ideologyBeliefs:"",significantPeople:"",importantLocations:"",treasuredPossessions:""}),We=(0,i.A)(Ue,2),Ge=We[0],Qe=We[1],Fe=(0,l.useState)([{name:"",description:""}]),Je=(0,i.A)(Fe,2),Ve=Je[0],Xe=Je[1],Ye=(0,l.useState)([{time:"",event:""}]),Ze=(0,i.A)(Ye,2),$e=Ze[0],et=(Ze[1],(0,l.useState)({str:!1,dex:!1,int:!1,con:!1,app:!1,pow:!1,siz:!1,edu:!1,luck:!1})),tt=(0,i.A)(et,2),nt=tt[0],at=tt[1],rt=(0,l.useState)(0),it=(0,i.A)(rt,2),lt=it[0],ct=it[1],st=(0,l.useState)({str:!1,dex:!1,int:!1,con:!1,app:!1,pow:!1,siz:!1,edu:!1,luck:!1}),ut=(0,i.A)(st,2),ot=ut[0],mt=ut[1],dt=(0,l.useState)(!1),pt=(0,i.A)(dt,2),ft=pt[0],Et=pt[1],gt=(0,l.useState)(0),bt=(0,i.A)(gt,2),vt=(bt[0],bt[1]),ht=(0,l.useState)({type:"",message:""}),yt=(0,i.A)(ht,2),Nt=yt[0],kt=yt[1],Ct=(0,l.useState)(!1),At=(0,i.A)(Ct,2),St=At[0],wt=At[1],xt=(0,l.useState)(!1),Ot=(0,i.A)(xt,2),It=Ot[0],Mt=Ot[1],Rt=(0,l.useState)(!1),jt=(0,i.A)(Rt,2),Pt=jt[0],Dt=jt[1];(0,l.useEffect)(function(){!function(){var e=0;E&&e++,h&&e++,C&&e++,x&&e++,R&&e++,q&&e++,e+=[L,U,F,Y,te,ie,ue,pe,be].filter(function(e){return e}).length,(Ge.personalDescription||Ge.ideologyBeliefs||Ge.significantPeople||Ge.importantLocations||Ge.treasuredPossessions)&&e++;var t=Math.round(e/16*100);vt(t)}()},[E,h,C,x,R,q,L,U,F,Y,te,ie,ue,pe,be,Ge]),(0,l.useEffect)(function(){if(pe&&F){var e=4*parseInt(pe),t=2*parseInt(F);He({professional:e,interest:t})}},[pe,F]);var qt=function(){return Math.floor(6*Math.random())+1+Math.floor(6*Math.random())+1+Math.floor(6*Math.random())+1},zt=function(){return Math.floor(6*Math.random())+1+Math.floor(6*Math.random())+1+6},Tt=function(){return 5*qt()},Ht=function(){return 5*zt()},Lt=function(e){ot[e]&&lt>=3?alert("总共只能重新投骰3次！"):(at(function(t){return d(d({},t),{},(0,a.A)({},e,!0))}),Et(!0),setTimeout(function(){var t;switch(e){case"int":case"siz":t=5*zt();break;case"edu":t=Ht();break;case"luck":t=Tt();break;default:t=5*qt()}switch(e){case"str":_(t.toString());break;case"dex":W(t.toString());break;case"int":J(t.toString());break;case"con":Z(t.toString());break;case"app":ne(t.toString());break;case"pow":le(t.toString());break;case"siz":oe(t.toString());break;case"edu":fe(t.toString());break;case"luck":ve(t.toString())}at(function(t){return d(d({},t),{},(0,a.A)({},e,!1))}),Et(!1),ot[e]&&ct(function(e){return e+1}),mt(function(t){return d(d({},t),{},(0,a.A)({},e,!0))})},1500))};(0,l.useEffect)(function(){!function(){if(L&&Y&&ie&&ue){parseInt(L);var e=parseInt(Y)||0,t=parseInt(ie)||0,n=parseInt(ue)||0,a=Math.round((e+n)/10),r=Math.round(t/5),i=t;ke(a.toString()),we(r.toString()),Me(i.toString())}}()},[L,Y,ie,ue]),(0,l.useEffect)(function(){var e;n&&alert("角色创建失败: "+((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||n.message))},[n]),(0,l.useEffect)(function(){De(u)},[]);var _t,Bt=function(){Object.values(Be).reduce(function(e,t){return e+(t.professional||0)+(t.interest||0)},0);var e=Object.values(Be).reduce(function(e,t){return e+(t.professional||0)},0),t=Object.values(Be).reduce(function(e,t){return e+(t.interest||0)},0);return{professional:Te.professional-e,interest:Te.interest-t}},Kt=function(e,t,n){var r,i=Be[e]||{professional:0,interest:0},l=Bt(),c=(null===(r=u[e])||void 0===r?void 0:r.initial)||0,s=Math.max(0,parseInt(n)||0),o=s-(i[t]||0);if(o>0&&l[t]<o)return kt({type:"error",message:"".concat("professional"===t?"职业":"兴趣","点不足！剩余").concat(l[t],"点")}),void setTimeout(function(){return kt({type:"",message:""})},3e3);var m=c+s+(i["professional"===t?"interest":"professional"]||0);if("interest"===t&&m>70)return kt({type:"error",message:"使用兴趣点技能值最高只能到70！"}),void setTimeout(function(){return kt({type:"",message:""})},3e3);if(m>80)return kt({type:"error",message:"技能值最高只能到80！"}),void setTimeout(function(){return kt({type:"",message:""})},3e3);var p=d(d({},i),{},(0,a.A)({},t,s));Ke(function(t){return d(d({},t),{},(0,a.A)({},e,p))});var f=c+p.professional+p.interest;De(function(t){return d(d({},t),{},(0,a.A)({},e,d(d({},t[e]),{},{current:f})))})},Ut=function(e,t,n){var a=Be[e]||{professional:0,interest:0},r=Math.max(0,(a[t]||0)+n);Kt(e,t,r)},Wt=function(e){var t;Ke(function(t){return d(d({},t),{},(0,a.A)({},e,{professional:0,interest:0}))});var n=(null===(t=u[e])||void 0===t?void 0:t.initial)||0;De(function(t){return d(d({},t),{},(0,a.A)({},e,d(d({},t[e]),{},{current:n})))})},Gt=function(){if(L&&U&&ue){var e=parseInt(L)||0,t=parseInt(U)||0,n=parseInt(ue)||0;return e<n&&t<n?7:e>n||t>n?9:8}return 8},Qt=function(e,t,n){var a=(0,r.A)(Ve);a[e][t]=n,Xe(a)},Ft=function(e,t){Qe(d(d({},Ge),{},(0,a.A)({},e,t)))};return l.createElement("div",{className:"new-person-container"},l.createElement(o.A,null),l.createElement("h2",null,"创建新角色"),ft&&l.createElement("div",{className:"central-dice-overlay"},l.createElement("div",{className:"giant-dice d100"},l.createElement("div",{className:"dice-face"},"D100"),l.createElement("div",{className:"dice-dots"},l.createElement("span",null,"•"),l.createElement("span",null,"••"),l.createElement("span",null,"•••"),l.createElement("span",null,"••••"),l.createElement("span",null,"•••••"),l.createElement("span",null,"••••••"),l.createElement("span",null,"•••••••"),l.createElement("span",null,"••••••••"),l.createElement("span",null,"•••••••••"),l.createElement("span",null,"••••••••••")))),l.createElement("form",{onSubmit:function(t){if(t.preventDefault(),!It){Mt(!0),kt({type:"",message:""});try{var n;if(!Object.values(ot).every(function(e){return e}))return kt({type:"error",message:"请为所有属性投骰子！"}),void Mt(!1);var a={};Object.keys(Pe).forEach(function(e){var t,n=Be[e]||{professional:0,interest:0},r=((null===(t=Pe[e])||void 0===t?void 0:t.initial)||0)+n.professional+n.interest,i=e;"throw"===e&&(i="throwSkill"),a[i]=r});for(var r=1;r<=5;r++)a["custom".concat(r)]=1;var i={userId:(null==m?void 0:m.id)||"1",name:E,characterClass:"Ranger",level:5,profession:C,age:parseInt(h),gender:x,currentResidence:R,birthplace:q,str:parseInt(L),con:parseInt(Y),dex:parseInt(U),app:parseInt(te),pow:parseInt(ie),siz:parseInt(ue),int_:parseInt(F),edu:parseInt(pe),hp:parseInt(Ne),mp:parseInt(Se),san:parseInt(Ie),luck:parseInt(be),moveRate:Gt(),skills:a,weapons:[{name:"徒手格斗",successRate:(null===(n=Pe.fighting1)||void 0===n?void 0:n.current)||45,penetration:"无",damage:"1D3",range:"—",attacks:1,ammo:"—",malfunction:"—"}],background:{personalDescription:Ge.personalDescription,ideologyBeliefs:Ge.ideologyBeliefs,significantPeople:Ge.significantPeople,importantLocations:Ge.importantLocations,treasuredPossessions:Ge.treasuredPossessions},history:$e.filter(function(e){return e.time&&e.event}),achievements:[{}]};e({type:"CREATE_CHARACTER_REQUEST",payload:i}),kt({type:"success",message:"角色创建中..."}),Dt(!0),setTimeout(function(){Mt(!1),Dt(!1)},3e3)}catch(e){console.error("创建角色失败:",e),kt({type:"error",message:"创建角色失败，请重试！"}),Mt(!1)}}}},l.createElement("h3",null,"基本信息"),l.createElement("div",{className:"character-tables"},l.createElement("table",{className:"character-table"},l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"姓名"),l.createElement("td",null,l.createElement("input",{type:"text",value:E,onChange:function(e){return g(e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"年龄"),l.createElement("td",null,l.createElement("input",{type:"text",value:h,onChange:function(e){return y(e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"职业"),l.createElement("td",null,l.createElement("input",{type:"text",value:C,onChange:function(e){return A(e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"性别"),l.createElement("td",null,l.createElement("input",{type:"text",value:x,onChange:function(e){return O(e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"现居地"),l.createElement("td",null,l.createElement("input",{type:"text",value:R,onChange:function(e){return j(e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"出生地"),l.createElement("td",null,l.createElement("input",{type:"text",value:q,onChange:function(e){return z(e.target.value)},required:!0}))))),l.createElement("div",{className:"total-rolls-info"},"🎲 剩余重投次数: ",3-lt,"/3"),Nt.message&&l.createElement("div",{className:"status-message status-".concat(Nt.type)},Nt.message),l.createElement("button",{type:"button",className:"roll-all-button",onClick:function(){wt(!0),Et(!0);var e=Object.values(ot).some(function(e){return e});kt(e?{type:"info",message:"正在重新投掷所有属性..."}:{type:"info",message:"正在投掷所有属性..."}),setTimeout(function(){var t=5*qt(),n=5*qt(),a=5*qt(),r=5*qt(),i=5*qt(),l=5*qt(),c=5*qt(),s=Ht(),u=Tt();_(t),W(n),J(a),Z(r),ne(i),le(l),oe(c),fe(s),ve(u),mt({str:!0,dex:!0,int:!0,con:!0,app:!0,pow:!0,siz:!0,edu:!0,luck:!0}),ct(0),wt(!1),Et(!1),kt(e?{type:"success",message:"所有属性重新投掷完成！重投次数已重置为3次。"}:{type:"success",message:"所有属性投掷完成！你有3次重投机会。"}),setTimeout(function(){return kt({type:"",message:""})},5e3)},2e3)},disabled:St},St?"投掷中...":Object.values(ot).some(function(e){return e})?"重新全投所有属性":"一键全投所有属性"),(_t=function(){var e=[L,U,F,Y,te,ie,ue,pe,be].filter(function(e){return e}).map(function(e){return parseInt(e)});if(0===e.length)return null;var t=e.reduce(function(e,t){return e+t},0),n=Math.round(t/e.length),a=Math.max.apply(Math,(0,r.A)(e)),i=function(e){return e>=80?"excellent":e>=65?"good":e>=50?"average":"poor"};return{total:t,average:n,maxAttr:a,minAttr:Math.min.apply(Math,(0,r.A)(e)),count:e.length,totalRating:i(t/9),averageRating:i(n),maxRating:i(a)}}())&&_t.count>=9?l.createElement("div",{className:"attributes-summary"},l.createElement("div",{className:"summary-title"},"🎯 属性总览"),l.createElement("div",{className:"summary-stats"},l.createElement("div",{className:"summary-stat"},l.createElement("div",{className:"summary-stat-label"},"总值"),l.createElement("div",{className:"summary-stat-value ".concat(_t.totalRating)},_t.total)),l.createElement("div",{className:"summary-stat"},l.createElement("div",{className:"summary-stat-label"},"平均值"),l.createElement("div",{className:"summary-stat-value ".concat(_t.averageRating)},_t.average)),l.createElement("div",{className:"summary-stat"},l.createElement("div",{className:"summary-stat-label"},"最高值"),l.createElement("div",{className:"summary-stat-value ".concat(_t.maxRating)},_t.maxAttr)))):null,l.createElement("table",{className:"character-table attributes-table"},l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"力量"),l.createElement("td",{className:"attribute-cell"},ot.str?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},L),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("str")},disabled:nt.str||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.str?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("str")},disabled:nt.str},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"敏捷"),l.createElement("td",{className:"attribute-cell"},ot.dex?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},U),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("dex")},disabled:nt.dex||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.dex?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("dex")},disabled:nt.dex},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"智力"),l.createElement("td",{className:"attribute-cell"},ot.int?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},F),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("int")},disabled:nt.int||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.int?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("int")},disabled:nt.int},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"体质"),l.createElement("td",{className:"attribute-cell"},ot.con?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},Y),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("con")},disabled:nt.con||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.con?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("con")},disabled:nt.con},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"外貌"),l.createElement("td",{className:"attribute-cell"},ot.app?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},te),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("app")},disabled:nt.app||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.app?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("app")},disabled:nt.app},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"意志"),l.createElement("td",{className:"attribute-cell"},ot.pow?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},ie),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("pow")},disabled:nt.pow||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.pow?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("pow")},disabled:nt.pow},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"体型"),l.createElement("td",{className:"attribute-cell"},ot.siz?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},ue),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("siz")},disabled:nt.siz||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.siz?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("siz")},disabled:nt.siz},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"教育"),l.createElement("td",{className:"attribute-cell"},ot.edu?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},pe),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("edu")},disabled:nt.edu||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.edu?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("edu")},disabled:nt.edu},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"幸运值"),l.createElement("td",{className:"attribute-cell"},ot.luck?l.createElement("div",{className:"attribute-display"},l.createElement("span",{className:"attribute-value"},be),l.createElement("button",{className:"mini-dice-button",onClick:function(){return Lt("luck")},disabled:nt.luck||lt>=3,title:"剩余总重投次数: ".concat(3-lt)},nt.luck?"🎲":"🔄")):l.createElement("button",{className:"dice-button",onClick:function(){return Lt("luck")},disabled:nt.luck},"🎲"))),l.createElement("tr",null,l.createElement("th",null,"生命值"),l.createElement("td",null,l.createElement("span",{className:"derived-stat"},Ne))),l.createElement("tr",null,l.createElement("th",null,"魔法值"),l.createElement("td",null,l.createElement("span",{className:"derived-stat"},Se))),l.createElement("tr",null,l.createElement("th",null,"理智值"),l.createElement("td",null,l.createElement("span",{className:"derived-stat"},Ie)))))),l.createElement("div",{className:"section-separator"}),l.createElement("div",{className:"skill-points-section"},l.createElement("h3",null,"技能点分配"),l.createElement("div",{className:"skill-points-display"},l.createElement("div",{className:"points-info"},l.createElement("div",{className:"point-type professional"},l.createElement("span",{className:"label"},"职业点:"),l.createElement("span",{className:"available"},Bt().professional),l.createElement("span",{className:"total"},"/ ",Te.professional)),l.createElement("div",{className:"point-type interest"},l.createElement("span",{className:"label"},"兴趣点:"),l.createElement("span",{className:"available"},Bt().interest),l.createElement("span",{className:"total"},"/ ",Te.interest)),l.createElement("button",{type:"button",className:"reset-all-btn",onClick:function(){Ke({}),De(u),kt({type:"success",message:"已重置所有技能分配"}),setTimeout(function(){return kt({type:"",message:""})},2e3)},title:"重置所有技能分配"},"🔄 重置所有")))),l.createElement("h3",null,"技能列表"),l.createElement("table",{className:"skills-table"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"技能名称"),l.createElement("th",null,"初始值"),l.createElement("th",null,"最终值"),l.createElement("th",null,"职业点"),l.createElement("th",null,"兴趣点"),l.createElement("th",null,"操作"))),l.createElement("tbody",null,Object.keys(s.A).map(function(e){var t,n=Be[e]||{professional:0,interest:0},a=(null===(t=Pe[e])||void 0===t?void 0:t.initial)||0,r=a+n.professional+n.interest;return l.createElement("tr",{key:e},l.createElement("td",{className:"skill-name"},s.A[e]),l.createElement("td",null,l.createElement("span",{className:"skill-initial"},a)),l.createElement("td",null,l.createElement("span",{className:"skill-final"},r)),l.createElement("td",null,l.createElement("div",{className:"allocation-input-group"},l.createElement("input",{type:"number",className:"allocation-input professional",value:n.professional||0,onChange:function(t){return Kt(e,"professional",t.target.value)},min:"0",max:"80",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}}),l.createElement("div",{className:"quick-buttons"},l.createElement("button",{type:"button",onClick:function(){return Ut(e,"professional",5)}},"+5"),l.createElement("button",{type:"button",onClick:function(){return Ut(e,"professional",10)}},"+10")))),l.createElement("td",null,l.createElement("div",{className:"allocation-input-group"},l.createElement("input",{type:"number",className:"allocation-input interest",value:n.interest||0,onChange:function(t){return Kt(e,"interest",t.target.value)},min:"0",max:"70",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}}),l.createElement("div",{className:"quick-buttons"},l.createElement("button",{type:"button",onClick:function(){return Ut(e,"interest",5)}},"+5"),l.createElement("button",{type:"button",onClick:function(){return Ut(e,"interest",10)}},"+10")))),l.createElement("td",null,l.createElement("button",{type:"button",className:"reset-skill-btn",onClick:function(){return Wt(e)},title:"重置此技能"},"🔄")))}))),l.createElement("div",{className:"skills-container"},Object.keys(s.A).map(function(e){var t,n=Be[e]||{professional:0,interest:0},a=(null===(t=Pe[e])||void 0===t?void 0:t.initial)||0,r=a+n.professional+n.interest;return l.createElement("div",{key:e,className:"skill-card-enhanced"},l.createElement("div",{className:"skill-card-header"},l.createElement("div",{className:"skill-name"},s.A[e]),l.createElement("div",{className:"skill-values"},l.createElement("span",{className:"skill-initial"},"初始: ",a),l.createElement("span",{className:"skill-final"},"最终: ",r)),l.createElement("button",{type:"button",className:"reset-skill-btn mobile",onClick:function(){return Wt(e)},title:"重置此技能"},"🔄")),l.createElement("div",{className:"skill-allocation"},l.createElement("div",{className:"allocation-row"},l.createElement("label",{className:"allocation-label"},"职业点:"),l.createElement("div",{className:"allocation-input-group"},l.createElement("input",{type:"number",className:"allocation-input professional",value:n.professional||0,onChange:function(t){return Kt(e,"professional",t.target.value)},min:"0",max:"80",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}}),l.createElement("div",{className:"quick-buttons"},l.createElement("button",{type:"button",onClick:function(){return Ut(e,"professional",5)}},"+5"),l.createElement("button",{type:"button",onClick:function(){return Ut(e,"professional",10)}},"+10"),l.createElement("button",{type:"button",onClick:function(){return Ut(e,"professional",20)}},"+20")))),l.createElement("div",{className:"allocation-row"},l.createElement("label",{className:"allocation-label"},"兴趣点:"),l.createElement("div",{className:"allocation-input-group"},l.createElement("input",{type:"number",className:"allocation-input interest",value:n.interest||0,onChange:function(t){return Kt(e,"interest",t.target.value)},min:"0",max:"70",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}}),l.createElement("div",{className:"quick-buttons"},l.createElement("button",{type:"button",onClick:function(){return Ut(e,"interest",5)}},"+5"),l.createElement("button",{type:"button",onClick:function(){return Ut(e,"interest",10)}},"+10"),l.createElement("button",{type:"button",onClick:function(){return Ut(e,"interest",20)}},"+20"))))))})),l.createElement("button",{type:"button",onClick:function(){console.log("添加自定义技能功能待实现")}},"添加技能"),l.createElement("div",{className:"section-separator"}),l.createElement("h3",null,"背景故事"),l.createElement("table",{className:"character-table full-width"},l.createElement("tbody",null,l.createElement("tr",null,l.createElement("th",null,"个人描述"),l.createElement("td",null,l.createElement("textarea",{value:Ge.personalDescription,onChange:function(e){return Ft("personalDescription",e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"思想/信仰"),l.createElement("td",null,l.createElement("textarea",{value:Ge.ideologyBeliefs,onChange:function(e){return Ft("ideologyBeliefs",e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"重要人物"),l.createElement("td",null,l.createElement("textarea",{value:Ge.significantPeople,onChange:function(e){return Ft("significantPeople",e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"重要地址"),l.createElement("td",null,l.createElement("textarea",{value:Ge.importantLocations,onChange:function(e){return Ft("importantLocations",e.target.value)},required:!0}))),l.createElement("tr",null,l.createElement("th",null,"贵重物品"),l.createElement("td",null,l.createElement("textarea",{value:Ge.treasuredPossessions,onChange:function(e){return Ft("treasuredPossessions",e.target.value)},required:!0}))))),l.createElement("div",{className:"section-separator"}),l.createElement("h3",null,"随身物品"),Ve.map(function(e,t){return l.createElement("div",{key:t,className:"item-record"},l.createElement("input",{type:"text",placeholder:"物品名称",value:e.name,onChange:function(e){return Qt(t,"name",e.target.value)},required:!0}),l.createElement("input",{type:"text",placeholder:"物品描述",value:e.description,onChange:function(e){return Qt(t,"description",e.target.value)},required:!0}))}),l.createElement("button",{type:"button",onClick:function(){Xe([].concat((0,r.A)(Ve),[{name:"",description:""}]))}},"添加物品"),Nt.message&&l.createElement("div",{className:"status-message ".concat(Nt.type)},Nt.message),l.createElement("button",{type:"submit",disabled:It},It?"创建中...":"提交")),Pt&&l.createElement("div",{className:"success-modal-overlay"},l.createElement("div",{className:"success-modal"},l.createElement("div",{className:"success-icon"},"✅"),l.createElement("h3",null,"角色创建成功！"),l.createElement("p",null,"正在跳转到首页..."))))}},7468:()=>{},7721:()=>{}}]);
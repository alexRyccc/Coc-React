/*! For license information please see main.ae01116b.js.LICENSE.txt */
(()=>{"use strict";var e,r,t,n={8604:(e,r,t)=>{t.d(r,{A:()=>J});var n=t(5458),o=t(4467),a=t(8238),s=t(7701),c=t(2284),u=t(3786),i=t(1083);function l(){var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,n,o,a){var u=n&&n.prototype instanceof c?n:c,i=Object.create(u.prototype);return p(i,"_invoke",function(t,n,o){var a,c,u,i=0,l=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(r,t){return a=r,c=0,u=e,d.n=t,s}};function f(t,n){for(c=t,u=n,r=0;!p&&i&&!o&&r<l.length;r++){var o,a=l[r],f=d.p,g=a[2];t>3?(o=g===n)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(c=0,d.v=n,d.n=a[1]):f<g&&(o=t<3||a[0]>n||n>g)&&(a[4]=t,a[5]=n,d.n=g,c=0))}if(o||t>1)return s;throw p=!0,n}return function(o,l,g){if(i>1)throw TypeError("Generator is already running");for(p&&1===l&&f(l,g),c=l,u=g;(r=c<2?e:u)||!p;){a||(c?c<3?(c>1&&(d.n=-1),f(c,u)):d.n=u:d.v=u);try{if(i=2,a){if(c||(o="next"),r=a[o]){if(!(r=r.call(a,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,c<2&&(c=0)}else 1===c&&(r=a.return)&&r.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((r=(p=d.n<0)?u:t.call(n,d))!==s)break}catch(r){a=e,c=1,u=r}finally{i=1}}return{value:r,done:p}}}(t,o,a),!0),i}var s={};function c(){}function u(){}function i(){}r=Object.getPrototypeOf;var d=[][n]?r(r([][n]())):(p(r={},n,function(){return this}),r),f=i.prototype=c.prototype=Object.create(d);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,p(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=i,p(f,"constructor",i),p(i,"constructor",u),u.displayName="GeneratorFunction",p(i,o,"GeneratorFunction"),p(f),p(f,o,"Generator"),p(f,n,function(){return this}),p(f,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:g}})()}function p(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}p=function(e,r,t,n){function a(r,t){p(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(a("next",0),a("throw",1),a("return",2))},p(e,r,t,n)}var d=l().m(R),f=l().m(m),g=l().m(C),E=l().m(T),y=l().m(w),h=l().m(P),v="/api";function S(e){return i.A.post("".concat(v,"/user/login"),e,{headers:{"Content-Type":"application/json"}})}function R(e){var r,t,n,o,a;return l().w(function(s){for(;;)switch(s.p=s.n){case 0:return s.p=0,console.log("Login request payload:",e.payload),s.n=1,(0,u.T1)(S,e.payload);case 1:if(r=s.v,console.log("Login API response:",r),console.log("Login response data:",r.data),200!==r.status||!r.data){s.n=3;break}return s.n=2,(0,u.yJ)({type:"LOGIN_SUCCESS",payload:r.data});case 2:s.n=4;break;case 3:return s.n=4,(0,u.yJ)({type:"LOGIN_FAILURE",error:"Login failed: Invalid response"});case 4:s.n=6;break;case 5:return s.p=5,a=s.v,console.error("Login error:",a),console.error("Error response:",a.response),"登录失败",t=a.response?(null===(n=a.response.data)||void 0===n?void 0:n.message)||(null===(o=a.response.data)||void 0===o?void 0:o.error)||"服务器错误: ".concat(a.response.status):a.request?"网络连接失败，请检查网络":a.message||"未知错误",s.n=6,(0,u.yJ)({type:"LOGIN_FAILURE",error:t});case 6:return s.a(2)}},d,null,[[0,5]])}function A(e){return i.A.get("".concat(v,"/character/info?userId=").concat(e),{headers:{"Content-Type":"application/json"}})}function m(){var e,r,t,n,o,a,s;return l().w(function(i){for(;;)switch(i.p=i.n){case 0:return i.p=0,i.n=1,(0,u.Lt)(function(e){return e.user});case 1:if(e=i.v,console.log("Fetching characters for user:",e),e){i.n=3;break}return console.log("User not logged in"),i.n=2,(0,u.yJ)({type:"CHARACTERS_FAILURE",error:"User not logged in"});case 2:case 9:return i.a(2);case 3:return r="object"===(0,c.A)(e)&&e.id?e.id:e,console.log("Using userId:",r),i.n=4,(0,u.T1)(A,r);case 4:if(t=i.v,console.log("Characters API response:",t),console.log("Characters response data:",t.data),200!==t.status){i.n=6;break}return i.n=5,(0,u.yJ)({type:"CHARACTERS_SUCCESS",payload:t.data||[]});case 5:i.n=7;break;case 6:return console.error("Characters API returned non-200 status:",t.status),i.n=7,(0,u.yJ)({type:"CHARACTERS_FAILURE",error:"API返回状态码: ".concat(t.status)});case 7:i.n=9;break;case 8:return i.p=8,s=i.v,console.error("Fetch characters error:",s),console.error("Error response:",s.response),n="获取角色失败",s.response?(n=(null===(o=s.response.data)||void 0===o?void 0:o.message)||(null===(a=s.response.data)||void 0===a?void 0:a.error)||"服务器错误: ".concat(s.response.status),console.log("Server returned error:",n)):s.request?(n="网络连接失败，请检查网络",console.log("Network error")):(n=s.message||"未知错误",console.log("Unknown error:",n)),i.n=9,(0,u.yJ)({type:"CHARACTERS_FAILURE",error:n})}},f,null,[[0,8]])}function b(e){return i.A.post("".concat(v,"/user/register"),e,{headers:{"Content-Type":"application/json"}})}function C(e){var r,t,n,o,a;return l().w(function(s){for(;;)switch(s.p=s.n){case 0:return s.p=0,s.n=1,(0,u.yJ)({type:"REGISTER_REQUEST"});case 1:return console.log("Register request payload:",e.payload),s.n=2,(0,u.T1)(b,e.payload);case 2:if(r=s.v,console.log("Register API response:",r),console.log("Register response data:",r.data),200!==r.status||!r.data){s.n=4;break}return s.n=3,(0,u.yJ)({type:"REGISTER_SUCCESS",payload:r.data});case 3:s.n=5;break;case 4:return s.n=5,(0,u.yJ)({type:"REGISTER_FAILURE",error:"Registration failed: Invalid response"});case 5:s.n=7;break;case 6:return s.p=6,a=s.v,console.error("Register error:",a),console.error("Error response:",a.response),"注册失败",t=a.response?(null===(n=a.response.data)||void 0===n?void 0:n.message)||(null===(o=a.response.data)||void 0===o?void 0:o.error)||"服务器错误: ".concat(a.response.status):a.request?"网络连接失败，请检查网络":a.message||"未知错误",s.n=7,(0,u.yJ)({type:"REGISTER_FAILURE",error:t});case 7:return s.a(2)}},g,null,[[0,6]])}function O(e){return i.A.post("".concat(v,"/user/forgot-password"),e,{headers:{"Content-Type":"application/json"}})}function T(e){var r,t,n,o,a;return l().w(function(s){for(;;)switch(s.p=s.n){case 0:return s.p=0,s.n=1,(0,u.yJ)({type:"FORGOT_PASSWORD_REQUEST"});case 1:return console.log("Forgot password request payload:",e.payload),s.n=2,(0,u.T1)(O,e.payload);case 2:if(r=s.v,console.log("Forgot password API response:",r),console.log("Forgot password response data:",r.data),200!==r.status||!r.data){s.n=4;break}return s.n=3,(0,u.yJ)({type:"FORGOT_PASSWORD_SUCCESS",payload:r.data});case 3:s.n=5;break;case 4:return s.n=5,(0,u.yJ)({type:"FORGOT_PASSWORD_FAILURE",error:"Password reset failed: Invalid response"});case 5:s.n=7;break;case 6:return s.p=6,a=s.v,console.error("Forgot password error:",a),console.error("Error response:",a.response),"密码重置失败",t=a.response?(null===(n=a.response.data)||void 0===n?void 0:n.message)||(null===(o=a.response.data)||void 0===o?void 0:o.error)||"服务器错误: ".concat(a.response.status):a.request?"网络连接失败，请检查网络":a.message||"未知错误",s.n=7,(0,u.yJ)({type:"FORGOT_PASSWORD_FAILURE",error:t});case 7:return s.a(2)}},E,null,[[0,6]])}function _(e){return i.A.post("".concat(v,"/character/create"),e,{headers:{"Content-Type":"application/json"}})}function w(e){var r,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,(0,u.T1)(_,e.payload);case 1:return r=n.v,n.n=2,(0,u.yJ)({type:"CREATE_CHARACTER_SUCCESS",payload:r.data});case 2:return n.n=3,(0,u.yJ)({type:"FETCH_CHARACTERS"});case 3:n.n=5;break;case 4:return n.p=4,t=n.v,n.n=5,(0,u.yJ)({type:"CREATE_CHARACTER_FAILURE",error:t});case 5:return n.a(2)}},y,null,[[0,4]])}function P(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,u.p8)("LOGIN_REQUEST",R);case 1:return e.n=2,(0,u.p8)("REGISTER_REQUEST",C);case 2:return e.n=3,(0,u.p8)("FORGOT_PASSWORD_REQUEST",T);case 3:return e.n=4,(0,u.p8)("FETCH_CHARACTERS",m);case 4:return e.n=5,(0,u.p8)("CREATE_CHARACTER_REQUEST",w);case 5:return e.a(2)}},h)}function L(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?L(Object(t),!0).forEach(function(r){(0,o.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var U={user:null,error:null,isLoginLoading:!1,registerSuccess:null,registerError:null,isRegisterLoading:!1,forgotPasswordSuccess:null,forgotPasswordError:null,isForgotPasswordLoading:!1,characters:[],isCreatingCharacter:!1,createCharacterError:null},F=function(){try{var e=localStorage.getItem("coc-react-state");if(null===e)return;return JSON.parse(e)}catch(e){return void console.error("Error loading state from localStorage:",e)}}(),j=F?I(I({},U),F):U,k=(0,s.Ay)(),G=(0,a.y$)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOGOUT":return localStorage.removeItem("coc-react-state"),I({},U);case"LOGIN_REQUEST":return I(I({},e),{},{isLoginLoading:!0,error:null});case"LOGIN_SUCCESS":return I(I({},e),{},{user:r.payload,error:null,isLoginLoading:!1});case"LOGIN_FAILURE":return I(I({},e),{},{user:null,error:r.error,isLoginLoading:!1});case"REGISTER_REQUEST":return I(I({},e),{},{isRegisterLoading:!0,registerError:null,registerSuccess:null});case"REGISTER_SUCCESS":return I(I({},e),{},{registerSuccess:r.payload,registerError:null,isRegisterLoading:!1});case"REGISTER_FAILURE":return I(I({},e),{},{registerError:r.error,registerSuccess:null,isRegisterLoading:!1});case"FORGOT_PASSWORD_REQUEST":return I(I({},e),{},{isForgotPasswordLoading:!0,forgotPasswordError:null,forgotPasswordSuccess:null});case"FORGOT_PASSWORD_SUCCESS":return I(I({},e),{},{forgotPasswordSuccess:r.payload,forgotPasswordError:null,isForgotPasswordLoading:!1});case"FORGOT_PASSWORD_FAILURE":return I(I({},e),{},{forgotPasswordError:r.error,forgotPasswordSuccess:null,isForgotPasswordLoading:!1});case"CHARACTERS_SUCCESS":return console.log("CHARACTERS_SUCCESS action received:",r.payload),I(I({},e),{},{characters:r.payload,error:null});case"CHARACTERS_FAILURE":return console.log("CHARACTERS_FAILURE action received:",r.error),I(I({},e),{},{characters:[],error:r.error});case"CREATE_CHARACTER_REQUEST":return I(I({},e),{},{isCreatingCharacter:!0,createCharacterError:null});case"CREATE_CHARACTER_SUCCESS":return I(I({},e),{},{isCreatingCharacter:!1,createCharacterError:null,characters:[].concat((0,n.A)(e.characters),[r.payload])});case"CREATE_CHARACTER_FAILURE":return I(I({},e),{},{isCreatingCharacter:!1,createCharacterError:r.error});default:return e}},j,(0,a.Tw)(k));G.subscribe(function(){!function(e){try{var r=JSON.stringify({user:e.user,characters:e.characters});localStorage.setItem("coc-react-state",r)}catch(e){console.error("Error saving state to localStorage:",e)}}(G.getState())}),k.run(P);const J=G},8724:(e,r,t)=>{var n=t(6540),o=t(961),a=t(1225),s=t(8604),c=t(3029),u=t(2901),i=t(6822),l=t(3954),p=t(5501),d=t(6287),f=t(4625),g=t(4180);function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}var y=(0,d.Ay)(function(){return t.e(77).then(t.bind(t,2270))}),h=(0,d.Ay)(function(){return t.e(78).then(t.bind(t,9497))}),v=(0,d.Ay)(function(){return Promise.all([t.e(121),t.e(760)]).then(t.bind(t,6760))}),S=(0,d.Ay)(function(){return Promise.all([t.e(121),t.e(998)]).then(t.bind(t,2998))}),R=(0,d.Ay)(function(){return Promise.all([t.e(121),t.e(144)]).then(t.bind(t,5144))}),A=(0,d.Ay)(function(){return Promise.all([t.e(121),t.e(532),t.e(75)]).then(t.bind(t,2598))}),m=(0,d.Ay)(function(){return Promise.all([t.e(121),t.e(532),t.e(993)]).then(t.bind(t,5004))}),b=function(e){function r(){return(0,c.A)(this,r),e=this,t=r,n=arguments,t=(0,l.A)(t),(0,i.A)(e,E()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n));var e,t,n}return(0,p.A)(r,e),(0,u.A)(r,[{key:"render",value:function(){return n.createElement(f.I9,{basename:"/"},n.createElement(g.dO,null,n.createElement(g.qh,{path:"/",exact:!0,component:y}),n.createElement(g.qh,{path:"/index",component:y}),n.createElement(g.qh,{path:"/login",component:h}),n.createElement(g.qh,{path:"/history",component:v}),n.createElement(g.qh,{path:"/home",component:S}),n.createElement(g.qh,{path:"/newPerson",component:R}),n.createElement(g.qh,{path:"/study",component:A}),n.createElement(g.qh,{path:"/achievements",component:m})))}}])}(n.Component);function C(){return n.createElement(a.Kq,{store:s.A},n.createElement(b,null))}o.render(n.createElement(C,null),document.getElementById("app"))}},o={};function a(e){var r=o[e];if(void 0!==r)return r.exports;var t=o[e]={exports:{}};return n[e](t,t.exports,a),t.exports}a.m=n,e=[],a.O=(r,t,n,o)=>{if(!t){var s=1/0;for(l=0;l<e.length;l++){for(var[t,n,o]=e[l],c=!0,u=0;u<t.length;u++)(!1&o||s>=o)&&Object.keys(a.O).every(e=>a.O[e](t[u]))?t.splice(u--,1):(c=!1,o<s&&(s=o));if(c){e.splice(l--,1);var i=n();void 0!==i&&(r=i)}}return r}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[t,n,o]},a.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return a.d(r,{a:r}),r},a.d=(e,r)=>{for(var t in r)a.o(r,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((r,t)=>(a.f[t](e,r),r),[])),a.u=e=>"js/"+e+"."+{75:"ed2e05a6",77:"c807d139",78:"44044e49",144:"c508f17f",532:"57086764",760:"c6c3d06a",993:"e3ebb3b5",998:"d9747d91"}[e]+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r={},t="fzz-react-app:",a.l=(e,n,o,s)=>{if(r[e])r[e].push(n);else{var c,u;if(void 0!==o)for(var i=document.getElementsByTagName("script"),l=0;l<i.length;l++){var p=i[l];if(p.getAttribute("src")==e||p.getAttribute("data-webpack")==t+o){c=p;break}}c||(u=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.setAttribute("data-webpack",t+o),c.src=e),r[e]=[n];var d=(t,n)=>{c.onerror=c.onload=null,clearTimeout(f);var o=r[e];if(delete r[e],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),u&&document.head.appendChild(c)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="./";var s={792:0};a.f.compat=(e,r)=>{s[e]?r.push(s[e]):0!==s[e]&&{75:1,77:1,78:1,144:1,760:1,993:1,998:1}[e]&&r.push(s[e]=new Promise(function(r,t){for(var n="css/"+({}[e]||e)+"."+{75:"043396d4",77:"a5a09fae",78:"75106303",144:"21e1f3c6",532:"31d6cfe0",760:"0c6c70cb",993:"63685aeb",998:"cea53a0d"}[e]+".css",o=a.p+n,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var i=(p=c[u]).getAttribute("data-href")||p.getAttribute("href");if("stylesheet"===p.rel&&(i===n||i===o))return r()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){var p;if((i=(p=l[u]).getAttribute("data-href"))===n||i===o)return r()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=r,d.onerror=function(r){var n=r&&r.target&&r.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete s[e],d.parentNode.removeChild(d),t(a)},d.href=o,document.getElementsByTagName("head")[0].appendChild(d)}).then(function(){s[e]=0}))},(()=>{var e={792:0};a.f.j=(r,t)=>{var n=a.o(e,r)?e[r]:void 0;if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((t,o)=>n=e[r]=[t,o]);t.push(n[2]=o);var s=a.p+a.u(r),c=new Error;a.l(s,t=>{if(a.o(e,r)&&(0!==(n=e[r])&&(e[r]=void 0),n)){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+r+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,n[1](c)}},"chunk-"+r,r)}},a.O.j=r=>0===e[r];var r=(r,t)=>{var n,o,[s,c,u]=t,i=0;if(s.some(r=>0!==e[r])){for(n in c)a.o(c,n)&&(a.m[n]=c[n]);if(u)var l=u(a)}for(r&&r(t);i<s.length;i++)o=s[i],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(l)},t=self.webpackChunkfzz_react_app=self.webpackChunkfzz_react_app||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var c=a.O(void 0,[121],()=>a(8724));c=a.O(c)})();